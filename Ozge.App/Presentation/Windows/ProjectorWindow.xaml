<Window x:Class="Ozge.App.Presentation.Windows.ProjectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModels="clr-namespace:Ozge.App.Presentation.ViewModels"
        mc:Ignorable="d"
        Title="Ozge2 - Projector"
        ResizeMode="CanResize"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource ProjectorBackgroundBrush}">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Text="{Binding ModeTitle}"
                   FontSize="48"
                   FontWeight="Bold"
                   Foreground="{StaticResource ProjectorAccentBrush}" />

        <StackPanel Grid.Row="1"
                    Margin="0,24,0,0"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center">
            <TextBlock Text="{Binding Prompt}"
                       FontSize="36"
                       FontWeight="SemiBold"
                       TextAlignment="Center"
                       TextWrapping="Wrap" />
            <TextBlock Text="{Binding Feedback}"
                       FontSize="24"
                       Margin="0,24,0,0"
                       TextAlignment="Center"
                       TextWrapping="Wrap" />
        </StackPanel>

        <Border Grid.Row="2"
                Background="#33000000"
                CornerRadius="12"
                Padding="16"
                Margin="0,24,0,24"
                Visibility="{Binding IsQuizVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel>
                <DockPanel LastChildFill="False">
                    <TextBlock Text="{Binding QuizPrompt}"
                               DockPanel.Dock="Left"
                               FontSize="32"
                               FontWeight="Bold"
                               TextWrapping="Wrap"
                               Width="960" />
                    <TextBlock Text="{Binding QuizProgress}"
                               DockPanel.Dock="Right"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource ProjectorAccentBrush}" />
                </DockPanel>

                <ItemsControl ItemsSource="{Binding QuizOptions}"
                              Margin="0,24,0,0">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="{x:Type viewModels:ProjectorQuizOptionViewModel}">
                            <Border x:Name="OptionBorder"
                                    Background="#22000000"
                                    BorderBrush="Transparent"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="16"
                                    Margin="0,8">
                                <TextBlock Text="{Binding Text}"
                                           FontSize="28"
                                           TextWrapping="Wrap" />
                            </Border>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding IsHighlighted}" Value="True">
                                    <Setter TargetName="OptionBorder" Property="Background" Value="#5533FF99" />
                                    <Setter TargetName="OptionBorder" Property="BorderBrush" Value="{StaticResource ProjectorAccentBrush}" />
                                    <Setter TargetName="OptionBorder" Property="BorderThickness" Value="3" />
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>

        <Border Grid.Row="3"
                Background="#22000000"
                CornerRadius="12"
                Padding="16">
            <ItemsControl ItemsSource="{Binding Leaderboard}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type viewModels:GroupScoreItem}">
                        <DockPanel Margin="0,4">
                            <TextBlock Text="{Binding Name}"
                                       FontSize="20"
                                       FontWeight="SemiBold" />
                            <TextBlock Text="{Binding Score}"
                                       FontSize="20"
                                       DockPanel.Dock="Right" />
                        </DockPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>

        <Grid x:Name="FreezeOverlay"
              Background="#AA000000"
              Visibility="Collapsed">
            <TextBlock Text="Inputs Frozen"
                       FontSize="64"
                       FontWeight="Bold"
                       Foreground="{StaticResource ProjectorAccentBrush}"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center" />
        </Grid>

        <Grid x:Name="AnswerOverlay"
              Background="Transparent"
              Visibility="Collapsed">
            <TextBlock Text="Answers Revealed"
                       FontSize="48"
                       FontWeight="Bold"
                       Foreground="{StaticResource ProjectorAccentBrush}"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Bottom"
                       Margin="0,0,16,16" />
        </Grid>
    </Grid>
</Window>
