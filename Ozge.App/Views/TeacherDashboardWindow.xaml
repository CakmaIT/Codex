<Window x:Class="Ozge.App.Views.TeacherDashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Ozge.App.ViewModels"
        mc:Ignorable="d"
        Title="Özge2 Teacher Dashboard"
        Width="1200"
        Height="800"
        WindowStartupLocation="CenterScreen"
        Background="#121212">
    <Window.DataContext>
        <vm:TeacherDashboardViewModel />
    </Window.DataContext>
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="16">
            <ItemsControl ItemsSource="{Binding ClassTabs}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Content="{Binding Name}"
                                Margin="0,0,8,0"
                                Padding="16,8"
                                Command="{Binding DataContext.SwitchClassCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                CommandParameter="{Binding Id}"
                                Style="{StaticResource TabButtonStyle}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <ComboBox Width="240"
                      Margin="24,0,0,0"
                      ItemsSource="{Binding Units}"
                      SelectedItem="{Binding SelectedUnit}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Name}" />
                            <TextBlock Text=" • " />
                            <TextBlock Text="{Binding Topic}" FontStyle="Italic" />
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
            <StackPanel Orientation="Horizontal" Margin="24,0,0,0" VerticalAlignment="Center">
                <Button Content="HOME" Command="{Binding SetModeCommand}" CommandParameter="HOME" Margin="0,0,8,0" />
                <Button Content="QUIZ" Command="{Binding SetModeCommand}" CommandParameter="QUIZ" Margin="0,0,8,0" />
                <Button Content="PUZZLE" Command="{Binding SetModeCommand}" CommandParameter="PUZZLE" Margin="0,0,8,0" />
                <Button Content="SPEAK" Command="{Binding SetModeCommand}" CommandParameter="SPEAK" Margin="0,0,8,0" />
                <Button Content="STORY" Command="{Binding SetModeCommand}" CommandParameter="STORY" Margin="0,0,8,0" />
                <Button Content="DRAW" Command="{Binding SetModeCommand}" CommandParameter="DRAW" Margin="0,0,8,0" />
                <Button Content="BONUS" Command="{Binding SetModeCommand}" CommandParameter="BONUS" Margin="0,0,8,0" />
                <Button Content="RESULT" Command="{Binding SetModeCommand}" CommandParameter="RESULT" />
            </StackPanel>
        </StackPanel>
        <Grid Margin="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Border Background="#1E1E1E" CornerRadius="12" Padding="16" Margin="0,0,16,0">
                <StackPanel>
                    <TextBlock Text="Live Controls" FontSize="20" FontWeight="Bold" />
                    <TextBlock Text="Mode: " Margin="0,8,0,0">
                        <Run Text="{Binding ActiveMode}" />
                    </TextBlock>
                    <Button Content="Launch Projector" Margin="0,16,0,0" Command="{Binding LaunchProjectorCommand}" />
                    <ToggleButton Content="Reveal Answer" IsChecked="{Binding IsAnswerRevealEnabled}" Margin="0,8,0,0" />
                    <Separator Margin="0,16,0,16" />
                    <TextBlock Text="Upcoming Questions" FontSize="16" FontWeight="Bold" />
                    <ListBox ItemsSource="{Binding UpcomingQuestions}" Height="200" ScrollViewer.CanContentScroll="True">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Text="{Binding Prompt}" TextWrapping="Wrap" />
                                    <TextBlock Text="{Binding Correct}" FontWeight="Bold" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>
            <Border Grid.Column="1" Background="#1E1E1E" CornerRadius="12" Padding="16">
                <StackPanel>
                    <TextBlock Text="Group Scores" FontSize="20" FontWeight="Bold" />
                    <ItemsControl ItemsSource="{Binding Groups}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <DockPanel Margin="0,8,0,0">
                                    <TextBlock Text="{Binding Name}" Width="120" />
                                    <ProgressBar Minimum="0" Maximum="500" Value="{Binding Score}" Height="16" Margin="8,0,8,0" />
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="+5" Command="{Binding DataContext.AwardPointsCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0" />
                                        <Button Content="-5" Command="{Binding DataContext.PenalizePointsCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0" />
                                        <Button Content="Log" Command="{Binding DataContext.OpenBehaviorLogCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" />
                                    </StackPanel>
                                </DockPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
